<!doctype html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <title>jQuery UI Autocomplete functionality</title>
		  <style>
				ul.ui-autocomplete.ui-menu{width:600px}
				.ui-autocomplete { height: 200px; overflow-y: scroll; overflow-x: hidden;}
			</style>
      <link href="http://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel="stylesheet">
      <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
      <script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
      <!-- Javascript -->
      <script>


		$(function(){

			$.ajaxSetup({ scriptCharset: "utf-8" ,contentType: "application/x-www-form-urlencoded; charset=UTF-8" });
 
		     $( "#icd9" ).autocomplete({
		        source: function(req, res){
					console.log('req.term: ' + req.term);
					//console.log('encoded: ' + encodeURI(req.term));
					//console.log('encoded: ' + encodeURIComponent(req.term));
					$.ajax({url: "http://127.0.0.1:1337/?callback=?",
							dataType: "jsonp",
							data:{
								q: encodeURI(req.term)
							},
							success: function(data){
								res(data);
							},
							error: function(xhr, status, err){
								console.log(status);
								console.log(err);
							}
					});
				},
		        minLength: 2,
				select: function(event, ui){
					if (ui.item){
						$('#selectedIcd9Label').text(ui.item.label);
						$('#icd9').val(ui.item.label.split(' - ')[0]);
						alert($('#icd9').val());
					}
				}
		     });
		});
      </script> 
   </head>
   <body>
      Search: <input id="icd9" style="width:600px;height:60px"><br/><br/>
      Label: <span id="selectedIcd9Label"></span>
   </body>
</html>
